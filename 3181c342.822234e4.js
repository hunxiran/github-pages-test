(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{112:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return u}));var o=n(1),a=n(6),r=(n(0),n(156)),i=n(158),c={id:"lesson7",title:"Functional Components",sidebar_label:"Lesson7"},s={id:"advanceComp/lesson7",title:"Functional Components",description:"import useBaseUrl from '@docusaurus/useBaseUrl';\r",source:"@site/docs\\advanceComp\\lesson7.md",permalink:"/github-pages-test/docs/advanceComp/lesson7",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/advanceComp/lesson7.md",sidebar_label:"Lesson7",sidebar:"someSidebar",previous:{title:"Evan You on the Virtual DOM",permalink:"/github-pages-test/docs/advanceComp/lesson6"},next:{title:"Evan You on Functional Components",permalink:"/github-pages-test/docs/advanceComp/lesson8"}},l=[{value:"A Functional Component:",id:"a-functional-component",children:[]},{value:"Functional Wrapper Components",id:"functional-wrapper-components",children:[]},{value:"The More Complex Example",id:"the-more-complex-example",children:[]}],p={rightToc:l};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"In the previous lesson we learned how to create render functions. With this new super power there are two patterns you can use. The first, which we\u2019ll dive into this lesson, is a functional component which allows you to:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Create fast-loading presentational components"),Object(r.b)("li",{parentName:"ul"},"Create wrapper components")),Object(r.b)("p",null,"You could think of it like a Component on a diet. Perhaps we want a custom header just for presentational logic and we decide to write it using a render function:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-html"}),'<div id="app">\n  <big-topic>\n    Hiking Boots\n  </big-topic>\n</div>\n')),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"<script src=\"vue.js\"><\/script>\n<script>\n  Vue.component('big-topic', {\n    render(h) { \n      return h('h1', 'Topic: ' + this.$slots.default)\n    }\n  })\n  \n  new Vue({\n    el: '#app'\n  })\n<\/script>  \n")),Object(r.b)("p",null,"Notice how we\u2019re accessing the default slot, using ",Object(r.b)("inlineCode",{parentName:"p"},"this.$slots.default"),"."),Object(r.b)("h1",{id:"hiking-boots"},"Hiking Boots"),Object(r.b)("p",null,"Using a normal Component for this presentational Component is a little overkill. This is where functional components start to shine:"),Object(r.b)("h2",{id:"a-functional-component"},"A Functional Component:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Can\u2019t have")," its own data, computed properties, watchers, lifecycle events, or methods."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Can\u2019t have")," a template, unless that template is precompiled from a single-file component. That\u2019s why we used a render function above."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Can")," be passed things, like props, attributes, events, and slots."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"Returns")," a VNode or an array of VNodes from a render function. Unlike a normal component that has to have a single root VNode, it can return an array of VNodes.")),Object(r.b)("p",null,"As you might imagine (without less functionality) a functional component is a little faster. We can make a functional component by simply adding the option:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"Vue.component('big-topic', {\n  functional: true,  // <----- \n  render(h, context) { // Notice the new context parameter \n    return h('h1', context.slots().default) \n  }\n})\n")),Object(r.b)("p",null,"Notice how we now use the ",Object(r.b)("inlineCode",{parentName:"p"},"context")," parameter to access slots? This ",Object(r.b)("inlineCode",{parentName:"p"},"context")," argument is how we get access to to things like props, children, data, parent, listeners, and slots inside a functional component since we no longer can use ",Object(r.b)("inlineCode",{parentName:"p"},"this"),". The official Vue documentation ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://vuejs.org/v2/guide/render-function.html#Functional-Components"}),"goes into more detail"),"."),Object(r.b)("p",null,"If we\u2019re using Vue\u2019s single file components we can declare a functional components at the template level. Here is the above example as a single file component:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-html"}),"<template functional>\n  <h1>\n    <slot></slot>\n  </h1>\n</template>\n")),Object(r.b)("p",null,"Yes, that could be the ONLY content in your .vue file. No export default, no props, no data, no methods, and it will just render out the template. This is great for presentational templates."),Object(r.b)("h2",{id:"functional-wrapper-components"},"Functional Wrapper Components"),Object(r.b)("p",null,"Functional components are great to use when you need a way of programmatically delegating to a specific component. The Vue.js documentation has a great example I\u2019d like to walk you through, simplified first."),Object(r.b)("p",null,"Let\u2019s say you want to create a SmartTable component. If the list passed in is Empty render using one component, but if it\u2019s not Empty use another component."),Object(r.b)("img",{alt:"",src:Object(i.a)("img/funcComp1.jpg")}),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"SmartTable")," component only needs to know how to delegate, it doesn\u2019t have to be very smart, so it\u2019s going to be a functional component."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-html"}),"<div id=\"app\">\n  <smart-table :items='vehicles'>\n</div>\n")),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"<script src=\"vue.js\"><\/script>\n<script>\n  const EmptyTable = {\n    template: `<h1>Nothing Here</h1>`\n  }\n  const NormalTable = { // Normally this would be more complex\n    template: `<h1>Normal Table</h1>`  \n  }\n\n  Vue.component('smart-table', {\n    functional: true,\n    props: { items: { type: Array } },\n    render(h, context) {\n      if (context.props.items.length > 0 ) {  // Delegate \n        return h(NormalTable, context.data, context.children) \n      } else { \n        return h(EmptyTable, context.data, context.children)\n      }\n    }\n  })\n  new Vue({\n    el: '#app',\n    data: {\n    vehicles: [ 'Fiat', 'Toyota', 'BMW' ]\n    }\n  })\n<\/script>\n")),Object(r.b)("p",null,"As you might expect, when the vehicles Array is empty we see the EmptyTable, and when it has one or more item it displays the Normal Table:"),Object(r.b)("p",null,"With the h(NormalTable, context.data, context.children) line we\u2019re rendering the component and passing through all our data which includes attributes, event listeners, and props so Normal table will have access to them."),Object(r.b)("p",null,"Aside: Destructuring Context\nWhen you have a function which receives a JavaScript object as a parameter you can use ES6 destructuring to split it out into variables. It\u2019s not uncommon to see people do this with the context object like so:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"render(h, { props, data, children }) {\n  if (props.items.length > 0 ) {\n    return h(NormalTable, data, children) \n  } else {\n    return h(EmptyTable, data, children)\n  }\n}\n")),Object(r.b)("p",null,"As you can see, the code gets a little simpler."),Object(r.b)("h2",{id:"the-more-complex-example"},"The More Complex Example"),Object(r.b)("p",null,"The example in ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"https://vuejs.org/v2/guide/render-function.html#Functional-Components"}),"the Vue documentation")," is a more complex version of what we have above. Instead of having just two different components to render our list, we have four in our smart-table. Take a read:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js"}),"// Here are the four components we're delegating to\n\nvar EmptyList = { /* ... */ }\nvar TableList = { /* ... */ }\nvar OrderedList = { /* ... */ }\nvar UnorderedList = { /* ... */ }\n\nVue.component('smart-list', {\n  functional: true,\n  props: {\n    items: {\n      type: Array,\n      required: true\n    },\n    isOrdered: Boolean\n  },\n  render: function (createElement, context) {\n    \n    // This function returns which component to use to render\n    function appropriateListComponent () {\n      var items = context.props.items\n\n      if (items.length === 0)           return EmptyList\n      if (typeof items[0] === 'object') return TableList\n      if (context.props.isOrdered)      return OrderedList\n\n      return UnorderedList\n    }\n    \n    // Now call the appropriate component.\n    // Remember that h is short-hand for createElement\n    return createElement(\n      appropriateListComponent(),\n      context.data,\n      context.children\n    )\n  },\n})\n\n")),Object(r.b)("p",null,"As you can see, our functional component just wraps around our other four components."),Object(r.b)("p",null,"When you need some sort of wrapper or delegating component, and you care about speed, a functional component might be the best way to go. In our next lesson, we\u2019ll dive back into the Vue.js source to figure out more internals of the rendering and mounting process."))}u.isMDXComponent=!0},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var o=n(0),a=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},u=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=Object(o.forwardRef)((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(n),b=o,d=u["".concat(i,".").concat(b)]||u[b]||m[b]||r;return n?a.a.createElement(d,c({ref:t},l,{components:n})):a.a.createElement(d,c({ref:t},l))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=b;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var l=2;l<r;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},157:function(e,t,n){"use strict";var o=n(0),a=n(35);t.a=function(){return Object(o.useContext)(a.a)}},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n(157);function a(e){const{siteConfig:t}=Object(o.a)(),{baseUrl:n="/"}=t||{};if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}}}]);